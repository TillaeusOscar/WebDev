<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Movie Search</title>

   <!-- Bootswatch Slate CSS -->
   <link href="https://cdn.jsdelivr.net/npm/bootswatch@5.3.0/slate/bootstrap.min.css" rel="stylesheet">
  
  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">

  <!-- jQuery CDN (needed for Toastr) -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>

  <!-- Toastr CSS and JS -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.css" rel="stylesheet">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.js"></script>

  <style>
    body {
      background-color: #343a40; /* Tumma tausta */
      color: #ffffff; /* Valkoinen teksti */
    }
    #searchResults {
      margin-top: 20px;
    }
    .movie {
      border: 1px solid #ccc;
      padding: 10px;
      margin-bottom: 10px;
      border-radius: 5px;
      background-color: #495057;
    }
    .movie h3 {
      margin: 0;
      font-size: 1.2em;
    }
    
  </style>
  <style>
    /* Tumma tausta haku-napille */
    .btn-primary {
      background-color: #e03d94; /* Tumma tausta */
      border-color: #343a40; /* Sama väri reunalle */
      color: #ffffff; /* Valkoinen teksti */
    }
    .btn-primary:hover {
      background-color: #495057; /* Vaaleampi tumma hover */
      border-color: #495057;
    }
  </style>
</head>
<body class="container my-4">

  <h1 class="text-center mb-4">Movie Search</h1>
  <form id="searchForm" class="row g-3">
    <div class="col-md-8">
      <input type="text" id="searchQuery" class="form-control" placeholder="Enter movie title" required>
    </div>
    <div class="col-md-4">
      <button type="submit" class="btn btn-primary w-100">Search</button>
    </div>
  </form>

  <div id="searchResults" class="row mt-4"></div>

  <script>
      // Write your code here or create a separate .js file if you prefer

      // Im mixing English and Finnish in the code, sorry about that.
      // Im just so used to code and comment in Finnish but im working on that.

 
      // API key for OMDb

 const apiKey = '6358ad44 '; 

document.getElementById('searchForm').addEventListener('submit', async function (event) {
    event.preventDefault(); // Estää navigoiniin

    const searchQuery = document.getElementById('searchQuery').value;
    const searchResults = document.getElementById('searchResults');
    searchResults.innerHTML = ''; // Tyhjentää haun

    toastr.info('Etsitään elokuvia...'); // Näyttää että etsii elokuvia

    try {
        const response = await fetch(`https://www.omdbapi.com/?s=${encodeURIComponent(searchQuery)}&apikey=${apiKey}`);
        
        if (!response.ok) {
            throw new Error('Verkkovirhe');
        }

        const data = await response.json();

        if (data.Response === "True") {
            toastr.success('Elokuvia löytyi!'); // Näyttää onnistuneen haun
            displayMovies(data.Search); // Näyttää elokuvat
        } else {
            toastr.error('Elokuvia ei löytynyt'); // Error-ilmoitus
        }
    } catch (error) {
        toastr.error('Haussa tapahtui virhe'); // Error-ilmoitus
        console.error('Virhe:', error); 
    }
});

function displayMovies(movies) {
    movies.forEach(movie => {
        const col = document.createElement('div');
        col.classList.add('col-md-4');

        const card = document.createElement('div');
        card.classList.add('movie', 'card', 'mb-3');

        card.innerHTML = `
            <img src="${movie.Poster !== 'N/A' ? movie.Poster : 'https://via.placeholder.com/150'}" class="card-img-top" alt="${movie.Title}">
            <div class="card-body">
                <h5 class="card-title">${movie.Title}</h5>
                <p class="card-text">Year: ${movie.Year}</p>
                <p class="card-text">Type: ${movie.Type}</p>
            </div>
        `;

        col.appendChild(card);
        searchResults.appendChild(col);
    });
}
</script>

</body>
</html>
